DECOMPOSE_COMMON_PROCESSES=( 'project-root' 'diff-skeleton' )

# Print the project root
_decompose-process-project-root() {
  echo $(_decompose-project-root)
}
_decompose-process-project-root_help() {
  echo "  Print project root directory"
}

# Show differences between environment and skeleton
_decompose-process-diff-skeleton() {
  local project_root=$(_decompose-project-root)
  if [[ -d "$project_root/$1" || -f "$project_root/$1" ]]; then
    specified_path=$1
  fi

  # TODO: Somehow ignore generated files before diffing. Maybe clean first?
  # Is color diff available?
  local diffcommand="$(which colordiff 2> /dev/null)"
  if [ ! -n "$diffcommand" ]; then
    local diffcommand="$(which diff)"
  fi

	$diffcommand -r "$project_root/$specified_path" "$project_root"/.decompose/environment/skel/$specified_path
}
_decompose-process-diff-skeleton_help() {
  echo "  Show differences between environment and skeleton"
  echo "    Param 1: relative directory to project root to diff"
}

# vim:syntax=sh
